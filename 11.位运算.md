**什么是位运算？**

位运算是指进行二进制的运算，有“与&，或|，异或^，取反~，左移<<，右移>>”等操作。在使用十进制进行运算时，程序会切换成二进制，算出结果后输出十进制答案。

- &：都为1时结果为1
- |：有一个为1时结果为1
- ^：两个相同时结果为0
- ~：取反运算，1变0，0变1
- <<n：向左移动，相当于乘以n次2
- \>>n：向右移动，相当于除以n次2

更多细节与技巧可参考[leetcode的回答](https://www.zhihu.com/answer/736472332)。

##### 有关位运算的算法题：

[268. 丢失的数字](https://leetcode-cn.com/problems/missing-number/)

>给定一个包含 `[0, n]` 中 `n` 个数的数组 `nums` ，找出 `[0, n]` 这个范围内没有出现在数组中的那个数。

遍历数组，利用**异或相同等于0的特点**，计算$nums[n]$和$n$的异或值，若是不为0，则该位置为结果。

[260. 只出现一次的数字 III](https://leetcode-cn.com/problems/single-number-iii/)

> 给定一个整数数组 `nums`，其中恰好有两个元素只出现一次，其余所有元素均出现两次。 找出只出现一次的那两个元素。

与上题同理，将所有数字进行异或，则两两配对的会被抵消，剩下一次数字

[231. 2的幂](https://leetcode-cn.com/problems/power-of-two/)

> 给定一个整数，编写一个函数来判断它是否是 2 的幂次方。

1. 如果一个数为2的幂次方，则它的最高位是1，其余为0
2. $n-1$后得到一个最高位是0，其余为0的二进制
3. 将它们做与运算，n&(n-1)必然为0，反之不为0

[50. Pow(x, n)（快速幂）](https://leetcode-cn.com/problems/powx-n/)

> 实现 pow(*x*, *n*)，即计算 x 的 n 次幂函数。

例子：3^8^

- 正常流程是：9×3^7^，27×3^6^，81×3^5^....
- 快速幂的流程是：9^4^，81^2^，6561^1^

相当于：**底数相乘，指数对折**

那如果指数是个奇数对折不了怎么办？

把**底数提出一个放到外面乘，**奇数就变偶数了。而偶数对折的最后会使指数变成1（2到1），也是个奇数，所以可以判断当前指数是否为奇数，拿个变量接着计算结果。它不仅能来**凑数**，还能**兜底**。对了，你可以用$>>1$来代替除以2，用（b&1==1）来判断是否为奇数。

[面试题 05.07. 配对交换](https://leetcode-cn.com/problems/exchange-lcci/)

> 配对交换。编写程序，交换某个整数的奇数位和偶数位，尽量使用较少的指令（也就是说，位0与位1交换，位2与位3交换，以此类推）。

1. 可以将数字101010...三十二个10与整数做**与运算**取出偶数位[^1]
2. 可以将数字010101..三十二个01与整数做**与运算**取出奇数位
3. 三十二个10可以用$0x55555555$来表示，三十二个10可以用$0xaaaaaaaa$来表示（十六进制表示2进制）
4. 可以把与出来的偶数位>>1右移，奇数位<<1左移，再次与运算拼接得到结果

[371. 两整数之和](https://leetcode-cn.com/problems/sum-of-two-integers/)

> **不使用**运算符 `+` 和 `-` ，计算两整数 `a` 、`b` 之和。

可以将两数（a，b）相加看做是二进制的竖式计算

1. **异或**在二进制中相当于**不进位的加法**：在二进制中，两两数字只有几种情况，00，11，01，10。而异或将前两种算作0，后两种算作1。
2. **与**在二进制中相当于**退一位的进位**：只有两个数字都为1时，结果为1，即进位
3. 而(a & b) << 1可以看做是把**退一位的进位往前推一步变成进位**，若是不为0，则代表有需要进位的数字。
4. 所以当**(a & b) << 1不为0**时，就**与a^b相结合**得到结果，相当于互相补足。

[^1]: java的int类型最大长度为32

以上题目均转载自[leetcode](https://leetcode-cn.com/)